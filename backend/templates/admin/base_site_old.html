{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<div id="site-name">
    <a href="{% url 'admin:index' %}">
        <img src="{% static 'salon/img/logo-03.png' %}" alt="Logo" style="height: 40px; margin-right: 10px;">
        {{ site_header|default:_('Django administration') }}
    </a>
</div>
{% endblock %}

{% block nav-global %}{% endblock %}

{% block extrahead %}
{{ block.super }}
<link rel="icon" type="image/x-icon" href="{% static 'salon/favicon.ico' %}">
<link rel="shortcut icon" type="image/x-icon" href="{% static 'salon/favicon.ico' %}">

<!-- Admin Notification Widget Styles -->
<link rel="stylesheet" type="text/css" href="{% static 'salon/css/admin_notification_widget.css' %}">
<style>
/* Simple White & Black Admin Theme Overrides */
body {
    background-color: #FFFFFF !important;
    color: #000000 !important;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
}

/* Header */
#header {
    background-color: #FFFFFF !important;
    border-bottom: 1px solid #DEE2E6 !important;
    color: #000000 !important;
}

#header h1, #header h1 a:link, #header h1 a:visited {
    color: #000000 !important;
}

/* Sidebar */
#nav-sidebar {
    background-color: #F8F9FA !important;
    border-right: 1px solid #DEE2E6 !important;
}

#nav-sidebar .module caption {
    background-color: #000000 !important;
    color: #FFFFFF !important;
}

#nav-sidebar .module th {
    background-color: #F8F9FA !important;
    color: #000000 !important;
}

#nav-sidebar .module td {
    background-color: #FFFFFF !important;
    color: #000000 !important;
}

#nav-sidebar .module td a {
    color: #000000 !important;
}

#nav-sidebar .module td a:hover {
    background-color: #DEE2E6 !important;
    color: #000000 !important;
}

/* Content */
#content {
    background-color: #FFFFFF !important;
    color: #000000 !important;
}

/* Forms */
.form-row {
    background-color: #FFFFFF !important;
}

.form-row label {
    color: #000000 !important;
}

input[type="text"], input[type="email"], input[type="password"], 
input[type="number"], input[type="date"], input[type="time"],
textarea, select {
    background-color: #FFFFFF !important;
    border: 1px solid #DEE2E6 !important;
    color: #000000 !important;
}

input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus,
input[type="number"]:focus, input[type="date"]:focus, input[type="time"]:focus,
textarea:focus, select:focus {
    border-color: #000000 !important;
    box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.25) !important;
}

/* Buttons */
.default, input[type="submit"], input[type="button"], .button {
    background-color: #000000 !important;
    border: 1px solid #000000 !important;
    color: #FFFFFF !important;
}

.default:hover, input[type="submit"]:hover, input[type="button"]:hover, .button:hover {
    background-color: #343A40 !important;
    border-color: #343A40 !important;
    color: #FFFFFF !important;
}

/* Tables */
#result_list {
    background-color: #FFFFFF !important;
    border: 1px solid #DEE2E6 !important;
}

#result_list thead th {
    background-color: #F8F9FA !important;
    border-bottom: 2px solid #DEE2E6 !important;
    color: #000000 !important;
}

#result_list tbody tr {
    border-bottom: 1px solid #DEE2E6 !important;
}

#result_list tbody tr:hover {
    background-color: #F8F9FA !important;
}

#result_list tbody td {
    color: #000000 !important;
}

#result_list tbody td a {
    color: #000000 !important;
}

/* Pagination */
.paginator {
    background-color: #FFFFFF !important;
    color: #000000 !important;
}

.paginator a {
    background-color: #FFFFFF !important;
    border: 1px solid #DEE2E6 !important;
    color: #000000 !important;
}

.paginator a:hover {
    background-color: #F8F9FA !important;
    border-color: #DEE2E6 !important;
    color: #000000 !important;
}

.paginator .this-page {
    background-color: #000000 !important;
    border-color: #000000 !important;
    color: #FFFFFF !important;
}

/* Breadcrumbs */
.breadcrumbs {
    background-color: #FFFFFF !important;
    color: #000000 !important;
}

.breadcrumbs a {
    color: #000000 !important;
}

.breadcrumbs a:hover {
    color: #6C757D !important;
}

/* Messages */
.messagelist {
    background-color: #FFFFFF !important;
}

.messagelist .success {
    background-color: #D4EDDA !important;
    border: 1px solid #C3E6CB !important;
    color: #155724 !important;
}

.messagelist .error {
    background-color: #F8D7DA !important;
    border: 1px solid #F5C6CB !important;
    color: #721C24 !important;
}

.messagelist .warning {
    background-color: #FFF3CD !important;
    border: 1px solid #FFEAA7 !important;
    color: #856404 !important;
}

.messagelist .info {
    background-color: #D1ECF1 !important;
    border: 1px solid #BEE5EB !important;
    color: #0C5460 !important;
}

/* Remove any gradients or fancy effects */
* {
    background-image: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
}

/* Ensure clean appearance */
#container {
    background-color: #FFFFFF !important;
}

#content-main {
    background-color: #FFFFFF !important;
}

/* Login page */
.login {
    background-color: #FFFFFF !important;
}

.login .form-row {
    background-color: #FFFFFF !important;
}

.login .submit-row {
    background-color: #FFFFFF !important;
}

/* Dashboard */
.dashboard {
    background-color: #FFFFFF !important;
}

.dashboard .module {
    background-color: #FFFFFF !important;
    border: 1px solid #DEE2E6 !important;
}

.dashboard .module caption {
    background-color: #000000 !important;
    color: #FFFFFF !important;
}

.dashboard .module th {
    background-color: #F8F9FA !important;
    color: #000000 !important;
}

.dashboard .module td {
    background-color: #FFFFFF !important;
    color: #000000 !important;
}

.dashboard .module td a {
    color: #000000 !important;
}

/* Notifications Icon Positioning */
#user-tools {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    gap: 10px !important;
    flex-wrap: wrap !important;
}

/* Move notification bell beside the admin theme icon */
#header .notification-bell,
.notification-bell {
    position: relative !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    background-color: #f8f9fa !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 6px !important;
    padding: 8px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    margin-left: 10px !important;
    margin-right: 10px !important;
    vertical-align: middle !important;
}

.notification-bell:hover {
    background-color: #e9ecef !important;
    border-color: #adb5bd !important;
}

/* Move notifications to the left side */
#user-tools a[href*="notification"],
.notification-bell {
    order: -1 !important;
    margin-right: auto !important;
    display: flex !important;
    align-items: center !important;
    padding: 6px 10px !important;
    background-color: #f8f9fa !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 4px !important;
    text-decoration: none !important;
    color: #495057 !important;
    font-size: 13px !important;
    transition: all 0.2s ease !important;
    position: relative !important;
}

#user-tools a[href*="notification"]:hover {
    background-color: #e9ecef !important;
    border-color: #adb5bd !important;
    color: #212529 !important;
    text-decoration: none !important;
}

#user-tools a[href*="notification"]:before {
    content: "ðŸ”” " !important;
    margin-right: 5px !important;
}

/* Notification bell specific styling */
.notification-bell {
    cursor: pointer !important;
    position: relative !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    vertical-align: middle !important;
    z-index: 1000 !important;
}

.notification-bell svg {
    width: 24px !important;
    height: 24px !important;
    fill: #dc3545 !important;
    stroke: #dc3545 !important;
    stroke-width: 2 !important;
}

.notification-badge {
    position: absolute !important;
    top: -5px !important;
    right: -5px !important;
    background-color: #dc3545 !important;
    color: white !important;
    border-radius: 50% !important;
    width: 18px !important;
    height: 18px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 10px !important;
    font-weight: bold !important;
    min-width: 18px !important;
}

/* Notification bell positioning beside admin theme icon */
#header .notification-bell,
div.notification-bell,
.notification-bell,
.notification-widget {
    position: relative !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    background-color: #ffffff !important;
    border: 2px solid #dc3545 !important;
    border-radius: 6px !important;
    padding: 8px !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
    margin: 0 5px !important;
    vertical-align: middle !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 9999 !important;
}

/* Ensure proper spacing in user tools */
#user-tools {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
}

#user-tools > * {
    margin: 0 !important;
}

/* Position notification bell beside admin theme icon */
#user-tools .notification-bell {
    order: 1 !important;
    margin: 0 5px !important;
}

/* Responsive */
@media (max-width: 768px) {
    #nav-sidebar {
        background-color: #FFFFFF !important;
    }
    
    #content {
        background-color: #FFFFFF !important;
    }
    
    #user-tools {
        flex-direction: column !important;
        align-items: stretch !important;
    }
    
    #user-tools a[href*="notification"],
    .notification-bell {
        order: 0 !important;
        margin: 5px !important;
        display: inline-flex !important;
    }
    
    #user-tools > *:not(a[href*="notification"]) {
        margin-left: 0 !important;
        margin-bottom: 5px !important;
    }
  }
</style>
{% endblock %}

{% block extrastyle %}
  {{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'salon/css/simple_admin_theme.css' %}">
{% endblock %}

{% block extrajs %}
{{ block.super }}
<script src="{% static 'salon/js/simple_admin.js' %}"></script>

<!-- Direct Notification Widget HTML -->
<div class="notification-widget" id="notification-widget">
    <div class="notification-bell" id="notification-bell">
        <svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: #dc3545;">
            <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path>
        </svg>
        <span class="notification-badge" id="notification-badge">11</span>
    </div>
</div>

<script>
// Immediate execution - no waiting for DOM
console.log('Notification widget script starting...');

// Create notification widget immediately
function createNotificationWidget() {
    console.log('Creating notification widget...');
    
    // Remove existing widget if any
    const existing = document.getElementById('notification-widget');
    if (existing) {
        existing.remove();
    }
    
    // Create new widget
    const widget = document.createElement('div');
    widget.className = 'notification-widget';
    widget.id = 'notification-widget';
    widget.innerHTML = `
        <div class="notification-bell" id="notification-bell">
            <svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: #dc3545;">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path>
            </svg>
            <span class="notification-badge" id="notification-badge">11</span>
        </div>
    `;
    
    // Add to body
    document.body.appendChild(widget);
    console.log('Notification widget added to body');
    
    // Add click event
    const bell = widget.querySelector('#notification-bell');
    if (bell) {
        bell.addEventListener('click', function() {
            alert('ðŸ”” Notification bell clicked! You have 11 notifications.');
            console.log('Notification bell clicked');
        });
        console.log('Click event added to notification bell');
    }
    
    return widget;
}

// Try multiple approaches
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', createNotificationWidget);
} else {
    createNotificationWidget();
}

// Also try after a short delay
setTimeout(createNotificationWidget, 100);
setTimeout(createNotificationWidget, 500);
setTimeout(createNotificationWidget, 1000);

console.log('Notification widget script completed');

// Test alert to verify JavaScript is running
alert('ðŸ”” JavaScript is working! Notification widget should appear now.');
</script>
{% endblock %}